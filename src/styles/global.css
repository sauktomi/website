/* JetBrains Mono is only used in specific contexts, so we import it here */
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap&text=0123456789&font-display=swap');

@import "tailwindcss";
@import "./recipe-sections.css";

/* =============================================================================
   PERFORMANCE-OPTIMIZED GLOBAL STYLES
   ============================================================================= */

@layer base {
  /* ===== CORE DESIGN SYSTEM ===== */
  :root {
    --baseline-grid: 1.5rem;
    --measure: 70ch;
    
    /* Social Colors (non-theme dependent) */
    --color-social-facebook: #1877f2;
    --color-social-facebook-hover: #166fe5;
    --color-social-whatsapp: #25d366;
    --color-social-whatsapp-hover: #20c65a;
  }
  

  
  /* System preference fallback */
  @media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
      color-scheme: dark;
    }
  }
  
  @media (prefers-color-scheme: light) {
    :root:not([data-theme]) {
      color-scheme: light;
    }
  }
  
  /* ===== OPTIMIZED BASE STYLES ===== */
  html {
    @apply bg-gray-50 text-gray-900 font-sans antialiased;
    font-feature-settings: "liga", "kern", "calt";
    text-rendering: optimizeLegibility;
    scroll-behavior: smooth;
  }
  
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }

  /* ===== TYPOGRAPHY WITH TAILWIND INTEGRATION ===== */
  h1, h2, h3, h4, h5, h6 {
    @apply font-serif tracking-tight leading-tight font-bold;
    letter-spacing: -0.02em;
  }

  h1 { @apply text-4xl md:text-5xl lg:text-6xl mb-8; }
  h2 { @apply text-2xl md:text-3xl font-semibold mb-6; }
  h3 { @apply text-xl md:text-2xl font-medium mb-4; }
  h4 { @apply text-lg md:text-xl font-medium mb-3; }
  h5, h6 { @apply text-base md:text-lg font-normal mb-2; }

  p { @apply mb-5 leading-relaxed; }
  .lead { @apply text-lg md:text-xl font-light mb-8 text-gray-600 leading-relaxed; }
  .caption { @apply text-sm text-gray-600 uppercase font-medium tracking-widest; }

  /* ===== STREAMLINED LINK STYLES ===== */
  a {
    @apply border-b border-current text-current transition-colors duration-200;
    text-underline-offset: 0.2em;
  }

  a:hover { @apply text-blue-600 border-blue-600; }
  a:focus-visible { @apply outline-2 outline-offset-2 outline-blue-600 rounded; }
  .sidebar-link { @apply border-b-0; }
  .sidebar-link:hover { @apply text-blue-600 border-b-0; }

  /* ===== CONTENT ELEMENTS ===== */
  blockquote { @apply pl-8 border-l-[3px] border-blue-600 italic my-12 text-lg; }
  
  pre, code {
    @apply font-mono text-sm rounded bg-gray-800 text-gray-100;
  }
  
  code { @apply px-1 py-0.5; }
  
  pre { @apply p-6 overflow-x-auto my-8 bg-gray-800; }
  pre code { @apply bg-transparent p-0; }
  figure { @apply my-8; }
  img { @apply max-w-full h-auto; }
  figcaption { @apply text-sm text-gray-600 bg-gray-100; }
  hr { @apply my-12 border-t border-gray-200; }
  ul { @apply list-disc; }
  ol { @apply list-decimal; }
  li { @apply mb-2; }
  
  /* ===== TABLES WITH DIVIDE UTILITIES ===== */
  table { @apply w-full border-collapse mb-6 max-w-[var(--measure)]; }
  thead { @apply border-b-2 border-gray-900; }
  th { @apply font-medium text-left; }
  tbody tr { @apply divide-y divide-gray-200; }
  th, td { @apply py-3 px-4; }
  tr:hover { @apply bg-gray-100; }
  caption { @apply caption-bottom text-sm text-gray-600 py-2; }
}

/* =============================================================================
   COMPONENT SYSTEM - TAILWIND-OPTIMIZED
   ============================================================================= */

/* ===== BUTTON SYSTEM WITH SIZE UTILITIES ===== */
button {
  @apply cursor-pointer;
}

.btn {
  @apply inline-flex items-center gap-2 font-medium text-sm tracking-wide border-none rounded transition duration-200 bg-gray-900 text-white;
}

.btn { @apply px-6 py-3; }

.btn:hover {
  @apply bg-blue-600 -translate-y-0.5;
}

.btn:focus-visible { @apply outline-2 outline-offset-2 outline-blue-600; }

.btn-primary {
  @apply inline-flex items-center gap-2 font-medium border border-gray-200 rounded-lg transition duration-200 bg-gray-900 text-white;
}

.btn-primary { @apply px-6 py-3; }

.btn-primary:hover { @apply bg-gray-700; }

.btn-secondary {
  @apply inline-flex items-center gap-2 font-medium border border-gray-200 text-gray-900 rounded-lg transition duration-200;
}

.btn-secondary { @apply px-6 py-3; }

.btn-secondary:hover { @apply bg-blue-100; }

/* ===== REMAINING CARD COMPONENTS ===== */
.filter-card { @apply p-6 text-center cursor-pointer bg-white border border-gray-200 overflow-hidden rounded-xl transition duration-300; }
.filter-card:hover { @apply border-gray-300 -translate-y-0.5; }
.filter-card:focus-within { @apply outline-2 outline-gray-900 outline-offset-2; }

.reference-card { @apply p-6 lg:p-8 h-full flex flex-col bg-white border border-gray-200 overflow-hidden rounded-xl transition duration-300; }
.reference-card:hover { @apply border-gray-300 -translate-y-0.5; }
.reference-card:focus-within { @apply outline-2 outline-gray-900 outline-offset-2; }



.modernist-card { @apply bg-white border border-gray-200 overflow-hidden rounded-xl transition duration-300; }
.modernist-card:hover { @apply border-gray-300 -translate-y-0.5; }
.modernist-card:focus-within { @apply outline-2 outline-gray-900 outline-offset-2; }

/* ===== LAYOUT SYSTEM ===== */
.grid-asymmetric {
  @apply grid grid-cols-1 gap-8 md:grid-cols-[2fr_5fr_1fr] md:gap-x-8;
}

.layout-asymmetric {
  @apply grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-[3fr_1fr];
}

.content-grid {
  @apply grid gap-6 md:gap-8 lg:gap-12 grid-cols-1 lg:[grid-template-columns:260px_1fr];
}

.content-full { 
  @apply col-span-full;
}

/* ===== REFERENCE COMPONENTS WITH STANDARDIZED SPACING ===== */
.reference-item {
  @apply block border border-transparent rounded-xl transition duration-200;
}

.reference-item { @apply -mx-4 py-3 px-4; }

.reference-item:hover { @apply border-gray-300 bg-gray-50; }
.reference-item:focus { @apply outline-2 outline-offset-2 outline-gray-900; }

.reference-item-content { @apply flex items-center justify-between gap-4; }
.reference-item-text { @apply flex-1 min-w-0; }
.reference-item-title { @apply text-gray-900 font-medium text-lg block truncate transition-colors duration-200; }
.reference-item:hover .reference-item-title { @apply text-gray-700; }
.reference-item-description { @apply text-sm mb-0 text-gray-500 mt-1 line-clamp-1 transition-colors duration-200; }
.reference-item:hover .reference-item-description { @apply text-gray-600; }
.reference-item-arrow { @apply size-5 text-gray-300 flex-shrink-0 transition duration-200; }
.reference-item:hover .reference-item-arrow { @apply text-gray-500 translate-x-1; }

/* ===== UNIVERSAL LIST ITEM COMPONENTS ===== */
.list-item-wrapper {
  /* Wrapper class for list items - no additional styling needed */
}

.list-item {
  @apply block border border-transparent rounded-xl transition duration-200;
}

.list-item { @apply py-2 md:py-3 px-4 -mx-4; }

.list-item:hover { @apply border-gray-300 bg-gray-50; }
.list-item:focus { @apply outline-2 outline-offset-2 outline-gray-900; }

.list-item-content { @apply flex items-center gap-4 sm:gap-6; }
.list-item-number { @apply flex-shrink-0 text-xs font-mono font-medium text-gray-500 opacity-80 min-w-[2rem] text-right; }
.list-item-image { @apply flex-shrink-0; }
.list-item-text { @apply flex-1 min-w-0; }
.list-item-title { @apply text-gray-900 font-medium text-lg block transition-colors duration-200; }
.list-item:hover .list-item-title { @apply text-gray-700; }
.list-item:hover .list-item-number { @apply text-gray-700; }
.list-item-description { @apply text-sm max-md:hidden mb-0 text-gray-500 mt-1 line-clamp-1 transition-colors duration-200; }
.list-item:hover .list-item-description { @apply text-gray-600; }
.list-item-arrow { @apply size-5 text-gray-300 flex-shrink-0 transition duration-200; }
.list-item:hover .list-item-arrow { @apply text-gray-500 translate-x-1; }

/* ===== RECIPE ITEM COMPONENTS (ALIAS TO UNIVERSAL CLASSES FOR BACKWARD COMPATIBILITY) ===== */
.recipe-item {
  @apply block border border-transparent rounded-xl transition duration-200;
}

.recipe-item { @apply py-2 md:py-3 px-4 -mx-4; }

.recipe-item:hover { @apply border-gray-300 bg-gray-50; }
.recipe-item:focus { @apply outline-2 outline-offset-2 outline-gray-900; }

.recipe-item-content { @apply flex items-center gap-4 sm:gap-6; }
.recipe-item-number { @apply flex-shrink-0 text-xs font-mono font-medium text-gray-500 opacity-80 min-w-[2rem] text-right; }
.recipe-item-image { @apply flex-shrink-0; }
.recipe-item-text { @apply flex-1 min-w-0; }
.recipe-item-title { @apply text-gray-900 font-medium text-lg block transition-colors duration-200; }
.recipe-item:hover .recipe-item-title { @apply text-gray-700; }
.recipe-item:hover .recipe-item-number { @apply text-gray-700; }
.recipe-item-description { @apply text-sm max-md:hidden mb-0 text-gray-500 mt-1 line-clamp-1 transition-colors duration-200; }
.recipe-item:hover .recipe-item-description { @apply text-gray-600; }
.recipe-item-arrow { @apply size-5 text-gray-300 flex-shrink-0 transition duration-200; }
.recipe-item:hover .recipe-item-arrow { @apply text-gray-500 translate-x-1; }

/* ===== VARIANT STYLING ===== */
.variant-list { @apply mt-2 ml-4 space-y-1 border-l-2 border-gray-200 pl-4; }
.variant-item { @apply block border border-transparent rounded-lg transition duration-200; }

.variant-item { @apply py-2 px-3; }

.variant-item:hover { @apply border-gray-300 bg-gray-50; }
.variant-content { @apply flex items-center justify-between gap-3; }
.variant-text { @apply flex-1 min-w-0; }
.variant-title { @apply text-gray-800 font-medium text-base block truncate transition-colors duration-200; }
.variant-item:hover .variant-title { @apply text-gray-600; }
.variant-description { @apply text-sm mb-0 text-gray-500 mt-1 line-clamp-1 transition-colors duration-200; }
.variant-item:hover .variant-description { @apply text-gray-600; }
.variant-use { @apply text-xs mb-0 text-gray-400 mt-1 italic; }
.variant-arrow { @apply size-4 text-gray-300 flex-shrink-0 transition duration-200; }
.variant-item:hover .variant-arrow { @apply text-gray-500 translate-x-0.5; }

/* ===== SECTION HEADERS ===== */
.reference-section-header { @apply text-4xl font-light text-gray-900 select-none block leading-none; }

/* ===== BADGE SYSTEM WITH CONSISTENT SIZING ===== */
.badge-base { @apply inline-flex items-center text-xs font-normal rounded ml-1.5 opacity-80; }

.badge-base { @apply px-2 py-0.5; }

.badge-temp { @apply inline-flex items-center text-xs font-normal bg-orange-100 text-orange-700 rounded ml-1.5 opacity-80; }

.badge-temp { @apply px-2 py-0.5; }

.badge-time { @apply inline-flex items-center text-xs font-normal bg-blue-100 text-blue-800 rounded ml-1.5 opacity-80; }

.badge-time { @apply px-2 py-0.5; }

/* ===== NAVIGATION COMPONENTS ===== */
.breadcrumb-link { @apply text-gray-500 inline-flex items-center gap-2 transition-colors duration-200; }
.breadcrumb-link:hover { @apply text-gray-600; }
.nav-back-icon { @apply size-4; }

/* ===== RECIPE COMPONENTS ===== */

.timer-link {
  @apply text-blue-600 cursor-pointer underline decoration-dotted bg-transparent border-none p-0 transition duration-200;
}

.timer-link:hover { @apply decoration-solid; }
.timer-link.timer-link-active { @apply text-orange-600 font-bold rounded no-underline; }

.timer-link.timer-link-active { @apply px-1; }

.scaled-amount {
  @apply text-blue-600 font-semibold rounded transition-colors duration-200 bg-blue-50;
}

.scaled-amount { @apply px-1 py-0.5; }

.scaled-amount:hover {
  @apply bg-blue-100;
}

.serving-calculator {
  @apply mb-6 border border-gray-200 rounded-lg bg-blue-100;
}

.serving-calculator { @apply p-4; }

.serving-calculator-controls { @apply flex items-center justify-between gap-4; }

.serving-btn {
  @apply size-8 flex items-center justify-center rounded-full transition-colors duration-200 bg-blue-600 text-white;
}

.serving-btn:hover { @apply bg-blue-700; }
.serving-count { @apply min-w-12 text-center font-medium text-sm; }

/* ===== UNIFIED FILTER SYSTEM ===== */
.nav-container {
  @apply relative;
}

/* ===== OPTIMIZED FILTER COMPONENTS ===== */
.filter-section { @apply p-6; }
.filter-section h3 { @apply text-lg font-medium text-gray-900 mb-4 flex items-center gap-2; }

/* ===== FILTER TOGGLE BUTTONS ===== */
.filter-toggle-btn {
  @apply flex items-center justify-center gap-2 w-full text-gray-600 hover:bg-gray-900 hover:text-white transition-all duration-200;
}

.filter-toggle-btn { @apply px-4 py-3; }

/* Filter button wrapper positioning */
.filter-button-wrapper.first-filter .filter-toggle-btn {
  @apply border-r border-gray-200/50;
}

.filter-button-wrapper.middle-filter .filter-toggle-btn {
  @apply border-r border-gray-200/50;
}

.filter-button-wrapper.last-filter .filter-toggle-btn {
  /* No border for last filter button */
}

.filter-toggle-btn--wide {
  @apply flex items-center justify-center text-gray-600 hover:bg-gray-900 hover:text-white transition-all duration-200 hover:rounded-r-xl;
}

.filter-toggle-btn--wide { @apply px-6 py-3; }

.filter-toggle-btn--full-height {
  @apply flex h-full items-center justify-center text-gray-600 hover:bg-gray-900 hover:text-white transition-all duration-200 hover:rounded-r-xl;
}

.filter-toggle-btn--full-height { @apply px-6 py-3; }

/* ===== FILTER BADGES ===== */
.filter-badge {
  @apply hidden absolute -top-2 -right-2 size-5 bg-gray-900 text-white text-xs rounded-full items-center justify-center z-10;
}

/* ===== FILTER RESET BUTTONS ===== */
.filter-reset-btn {
  @apply w-full hidden items-center justify-center gap-2 text-gray-600 hover:text-gray-900 bg-gray-50 border-t border-gray-200 transition-all duration-200 text-sm;
}

.filter-reset-btn { @apply px-4 py-3; }

.filter-reset-btn--main {
  @apply w-full hidden items-center justify-center gap-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm;
}

.filter-reset-btn--main { @apply px-4 py-3; }

/* ===== VISIBILITY UTILITY CLASSES ===== */
.vis-flex {
  @apply flex;
}

.vis-block {
  @apply block;
}

.vis-inline-flex {
  @apply inline-flex;
}

/* ===== BUTTON COMPONENT SYSTEM WITH STANDARDIZED PADDING ===== */
.btn-primary-large {
  @apply inline-flex items-center justify-center w-full bg-gray-900 text-white font-medium rounded-xl transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2;
}

.btn-primary-large { @apply px-8 py-4; }

.btn-secondary-large {
  @apply inline-flex items-center justify-center w-full bg-white border border-gray-200 text-gray-900 font-medium rounded-xl hover:border-gray-300 hover:shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2;
}

.btn-secondary-large { @apply px-8 py-4; }

.btn-action {
  @apply inline-flex items-center justify-center border-b-0 bg-gray-900 text-white font-medium rounded-xl transition-all duration-300 transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2;
}

.btn-action { @apply px-8 py-4; }

.btn-search-close {
  @apply absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-900 transition-colors duration-200 rounded-md hover:bg-gray-100;
}

.btn-search-close { @apply p-2; }

/* ===== HIDDEN CONTENT DEFAULTS ===== */
.search-input-container {
  @apply bg-white/95 backdrop-blur-md border border-gray-200/80 rounded-xl shadow-sm mb-4;
}

.filter-content {
  @apply p-3;
}

.filter-popup {
  @apply absolute top-full left-0 right-0 bg-white border border-gray-200 border-t-0 rounded-b-xl shadow-xl z-20 transition-all duration-300;
}

.shared-filter-popup {
  @apply absolute top-full left-16 right-0 z-50 bg-white border border-gray-200 border-t-0 rounded-b-xl shadow-xl opacity-100;
}

.timer-modal {
  @apply hidden fixed inset-0 z-50 flex items-center justify-center transition duration-300;
  background: color-mix(in srgb, black 50%, transparent);
  backdrop-filter: blur(4px);
}

.timer-modal { @apply p-4; }

.progress-container {
  @apply hidden;
}

/* ===== POPUP TEMPLATE CONTAINERS ===== */
.popup-ingredients-section {
  @apply hidden;
}

.filter-item {
  @apply text-sm min-h-16 w-full text-left;
}

.filter-item { @apply px-8 py-6; }

.filter-item:hover { @apply bg-gray-100 border-gray-200; }
.filter-item:focus { @apply bg-gray-100 border-gray-200 outline-none; }

.filter-item-active {
  @apply bg-gray-100 text-gray-900;
}

/* ===== LEGACY FILTER CLASSES (for reference pages) ===== */
.category-filter {
  @apply w-full text-left text-sm rounded-lg border border-transparent hover:border-gray-300 focus:border-gray-400 transition-all duration-200 focus:outline-none;
}

.category-filter { @apply px-3 py-2; }

.dietary-filter {
  @apply w-full text-left text-sm rounded-lg border border-transparent hover:border-gray-300 focus:border-gray-400 transition-all duration-200 focus:outline-none;
}

.dietary-filter { @apply px-3 py-2; }

.type-filter {
  @apply w-full text-left text-sm rounded-lg border border-transparent hover:border-gray-300 focus:border-gray-400 transition-all duration-200 focus:outline-none;
}

.type-filter { @apply px-3 py-2; }

/* Active states for legacy filters */
.category-filter.filter-item-active,
.dietary-filter.filter-item-active,
.type-filter.filter-item-active {
  @apply bg-gray-100 text-gray-900 border-gray-300;
}

/* Container padding for filter content - moved to HIDDEN CONTENT DEFAULTS section */

/* Special handling for filter sections in main popup */
.filter-section .space-y-2 .filter-item {
  margin: 0;
}

/* Remove the !important overrides - fixing root cause instead */

/* ===== UTILITY CLASSES WITH STANDARDIZED SPACING ===== */
.v-space-1 { @apply my-4; }
.v-space-2 { @apply my-6; }
.v-space-4 { @apply my-8; }
.v-space-6 { @apply my-12; }

.vertical-divider { @apply w-px h-8 bg-gray-200 mx-4; }
.horizontal-divider { @apply h-px w-full bg-gray-200 my-8; }

.aspect-16-9 { aspect-ratio: 16 / 9; }

.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

/* ===== SCROLLBAR UTILITIES ===== */
.scrollbar-hidden {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scrollbar-hidden::-webkit-scrollbar { display: none; }

.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: #d1d5db transparent;
}

.scrollbar-thin::-webkit-scrollbar { @apply w-1.5; }
.scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
.scrollbar-thin::-webkit-scrollbar-thumb { @apply bg-gray-300 rounded-sm; }
.scrollbar-thin::-webkit-scrollbar-thumb:hover { @apply bg-gray-400; }

/* ===== PILL TOGGLE SWITCHES ===== */
.info-toggle-switch {
  @apply relative inline-flex cursor-pointer h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2;
}

.info-toggle-switch input {
  @apply sr-only;
}

.info-toggle-switch-bg {
  @apply relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 transition-colors;
}

.info-toggle-switch-bg::after {
  @apply absolute left-1 h-4 w-4 rounded-full bg-white transition-transform;
  content: '';
}

.info-toggle-switch input:checked + .info-toggle-switch-bg {
  @apply bg-blue-600;
}

.info-toggle-switch input:checked + .info-toggle-switch-bg::after {
  @apply translate-x-5;
}

/* ===== ACCESSIBILITY ===== */
.skip-link {
  @apply absolute -top-12 left-4 z-50 rounded transition duration-300 bg-gray-900 text-white;
}

.skip-link { @apply px-4 py-2; }

.skip-link:focus { @apply top-4; }

.focus-enhanced { @apply outline-offset-2; }
.focus-enhanced:focus-visible { @apply outline-2 outline-gray-900; }

.sr-only { @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0; }
.not-sr-only { @apply static w-auto h-auto p-0 m-0 overflow-visible whitespace-normal; }

/* ===== INTERACTIVE ELEMENTS ===== */
.interactive-element { @apply cursor-pointer select-none; }

.hover-translate { @apply transition-transform duration-200; }
.hover-translate:hover { @apply translate-x-1; }

/* =============================================================================
   POPUP SYSTEM - STREAMLINED WITH SIZE UTILITIES
   ============================================================================= */

.popup-main {
  @apply fixed inset-0 z-50 flex items-center justify-center transition duration-300;
  background: color-mix(in srgb, black 50%, transparent);
  backdrop-filter: blur(4px);
}

.popup-main { @apply p-4; }

.popup-main.invisible { @apply invisible pointer-events-none opacity-0; }

.popup-close-btn {
  @apply absolute top-4 right-4 z-30 text-white rounded-full transition-colors duration-200;
  background: color-mix(in srgb, black 30%, transparent);
}

.popup-close-btn { @apply p-2; }

.popup-close-btn:hover { background: color-mix(in srgb, black 50%, transparent); }
.popup-close-btn:focus { @apply outline-2 outline-offset-2 outline-white; }

.popup-content-container {
  @apply relative max-w-6xl w-full max-h-[90dvh] overflow-hidden md:overflow-visible overflow-y-auto md:overflow-y-visible rounded-xl transition-transform duration-300;
}

.popup-content-container.scale-95 { @apply scale-95; }

.popup-content-wrapper {
  @apply md:overflow-y-auto md:h-[90dvh];
  scrollbar-width: none;
  -ms-overflow-style: none;
}

/* ===== POPUP CARDS ===== */
.popup-card {
  @apply bg-gray-50 border border-gray-200 overflow-hidden rounded-lg transition-colors duration-200;
}

.popup-card h2 {
  @apply text-xl md:text-2xl font-semibold text-gray-900 mb-0 border-b border-gray-200 bg-gray-100;
}

.popup-card h2 { @apply px-6 py-4; }

.popup-card h3 { @apply text-lg md:text-xl font-medium mb-3 text-gray-900; }
.popup-card h4 { @apply text-base font-medium text-gray-900; }
.popup-card p { @apply text-gray-600 leading-relaxed mb-0; }
.popup-card ul { @apply list-disc list-inside space-y-1 mb-0 p-0; }
.popup-card li { @apply text-sm md:text-base text-gray-600 leading-relaxed; }
.popup-card dl { @apply space-y-3; }
.popup-card dt { @apply text-xs font-semibold text-gray-600 mb-1 uppercase tracking-wide; }
.popup-card dd { @apply text-sm md:text-base text-gray-900; }

/* ===== POPUP SECTIONS ===== */
.popup-ingredients-section { @apply space-y-6; }
.popup-profile-content { @apply space-y-6; }

.popup-profile-content { @apply px-6 py-5; }

.popup-profile-description { @apply text-base text-gray-900 leading-relaxed space-y-2; }
.popup-profile-main { @apply text-base text-gray-900 font-medium leading-relaxed block; }
.popup-profile-secondary { @apply text-sm text-gray-600 leading-relaxed opacity-90 block; }

.popup-profile-grid {
  @apply grid gap-8;
  grid-template-columns: 1fr 2fr;
}

.popup-profile-grid:has(> *:only-child) { grid-template-columns: 1fr; }

/* ===== FLAVOR PROFILE ===== */
.popup-flavor-section { @apply space-y-4; }
.popup-flavor-bars { @apply space-y-3; }

.popup-flavor-bar {
  @apply border border-gray-200 rounded-lg bg-gray-100;
}

.popup-flavor-bar { @apply p-3; }

.popup-flavor-header { @apply flex items-center justify-between; }
.popup-flavor-label { @apply text-sm font-medium text-gray-900 mb-0; }
.popup-flavor-score { @apply text-sm rounded-md text-gray-700; }

/* ===== SENSORY PROFILE ===== */
.popup-sensory-grid { @apply grid grid-cols-1 gap-4 rounded-lg bg-gray-100 border border-gray-200; }

.popup-sensory-grid { @apply p-4; }

.popup-sensory-item { @apply space-y-1; }
.popup-sensory-label { @apply text-xs font-semibold text-gray-600 uppercase tracking-wide block; }
.popup-sensory-value { @apply text-sm text-gray-900 mb-0; }

/* ===== PROPERTIES LIST ===== */
.popup-properties-list { @apply space-y-3 rounded-lg bg-gray-100; }

.popup-properties-list { @apply px-6 py-4; }

.popup-property-item { @apply flex items-start justify-between gap-4 py-2; }
.popup-property-item dt { @apply text-sm font-medium text-gray-700 flex-shrink-0 capitalize w-1/2; }
.popup-property-item dd { @apply text-sm text-gray-900 text-right w-1/2; }

/* ===== VARIANTS AND ALTERNATIVES ===== */
.popup-variants-section { @apply space-y-4; }

.popup-variants-section { @apply p-6; }

.popup-variants-container,
.popup-alternatives-container { @apply grid grid-cols-1 sm:grid-cols-2 gap-3; }

.popup-variant-item,
.popup-alternative-item {
  @apply rounded-lg bg-gray-100 border border-gray-200 space-y-2 transition duration-200;
}

.popup-variant-item,
.popup-alternative-item { @apply p-4; }

.popup-variant-item:hover,
.popup-alternative-item:hover { @apply bg-gray-100 border-gray-300; }

.popup-variant-name,
.popup-alternative-name { @apply font-medium text-gray-900; }

.popup-variant-description,
.popup-alternative-notes { @apply text-sm text-gray-600; }

/* ===== DIET TAGS ===== */
.popup-diet-tags { @apply flex flex-wrap items-center gap-2 mt-2; }
.popup-diet-indicator { @apply text-xs font-medium text-gray-600; }
.tag-category { @apply inline-block bg-gray-100 text-gray-700 text-xs font-medium rounded-md; }

.tag-category { @apply px-2 py-1; }

/* ===== TIPS SECTION ===== */
.popup-section-header { @apply text-base font-semibold text-gray-900 mb-4; }
.popup-tips-grid { @apply space-y-4; }

.popup-tips-grid { @apply p-6; }

.popup-tip-item {
  @apply flex items-start gap-3 border border-gray-200 rounded-lg transition duration-200 bg-gray-100;
}

.popup-tip-item { @apply p-4; }

.popup-tip-item:hover {
  @apply bg-gray-200;
}

.popup-tip-icon { @apply size-5 text-gray-600 flex-shrink-0 mt-0.5; }
.popup-tip-text { @apply text-sm text-gray-900 leading-relaxed; }

/* ===== PROCESS STEPS ===== */
.popup-process-steps { @apply space-y-6; }

.popup-process-steps { @apply p-6; }

.popup-process-step { @apply flex items-start gap-4; }
.step-number-circle { @apply size-8 bg-gray-700 text-white text-sm font-medium flex items-center justify-center flex-shrink-0 rounded-full; }
.popup-process-content { @apply flex-1 space-y-2; }
.popup-process-title { @apply text-base font-medium text-gray-900; }
.popup-process-description { @apply text-sm text-gray-600 leading-relaxed; }
.popup-process-meta { @apply text-xs text-gray-500 bg-gray-100 inline-block mr-2 rounded; }

.popup-process-meta { @apply px-2 py-1; }

/* ===== LIST SECTIONS ===== */
.popup-list-section { @apply space-y-3; }

.popup-list-section { @apply p-6; }

.popup-list-item { @apply bg-gray-100 border border-gray-200 text-sm text-gray-900 rounded-lg; }

.popup-list-item { @apply p-3; }

.popup-safety-item { @apply text-red-700 bg-red-50 border border-red-200 text-sm leading-relaxed rounded-lg; }

.popup-safety-item { @apply p-3; }

.popup-troubleshooting-item { @apply border-l-4 border-yellow-400 bg-yellow-50 text-sm text-gray-900 rounded-r-lg; }

.popup-troubleshooting-item { @apply p-3; }

/* =============================================================================
   RECIPE DESIGN - SIMPLIFIED GENERAL STYLES
   ============================================================================= */

/* ===== RECIPE VARIABLES ===== */
:root {
  --recipe-font-stack: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --recipe-text-primary: theme(colors.black);
  --recipe-text-secondary: theme(colors.gray.800);
  --recipe-text-muted: theme(colors.gray.600);
  --recipe-accent: theme(colors.blue.600);
  --recipe-accent-dark: theme(colors.blue.700);
  --recipe-border-light: theme(colors.gray.200);
  --recipe-border-medium: theme(colors.gray.400);
  --recipe-highlight: theme(colors.gray.100);
  --recipe-critical: theme(colors.red.600);
  --recipe-success: theme(colors.green.600);
  --recipe-warning: theme(colors.orange.600);
  --recipe-note-bg: theme(colors.gray.50);
}

/* ===== ENHANCED RECIPE HEADER ===== */
.recipe-header {
  @apply mb-8;
}

.recipe-title {
  @apply font-serif text-5xl lg:text-6xl mb-6 font-medium leading-tight;
  line-height: 1.1;
  letter-spacing: -0.02em;
}

.recipe-essentials {
  @apply flex items-center gap-3 lg:gap-6;
}

.recipe-meta-info {
  @apply flex flex-wrap items-center gap-y-4 md:gap-y-3 gap-x-6;
}

.recipe-meta-item { 
  @apply flex items-center gap-2 text-gray-900;
}

.recipe-meta-icon { 
  @apply size-4 text-gray-600 flex-shrink-0;
}

.recipe-meta-actions {
  @apply ml-auto flex items-center gap-3;
}

/* ===== OPTIMIZED RECIPE BODY ===== */
.recipe-body {
  @apply max-w-none text-gray-900;
  line-height: 1.7;
  font-feature-settings: "liga", "kern", "calt";
}

.recipe-body h2::after { display: none; }
.recipe-body p { @apply mb-6 text-base leading-relaxed max-w-[65ch]; }
.recipe-body li p,
.recipe-body li em { @apply inline; }
.recipe-body ul li { @apply mb-2 leading-relaxed; }
.recipe-body ul p { @apply mb-0; }

.recipe-body ul, .recipe-body ol {
  @apply pl-6 space-y-3;
}

.recipe-body ul {
  @apply list-disc;
}

.recipe-body ol {
  @apply list-decimal;
}

.recipe-body li {
  @apply leading-relaxed;
}

.recipe-body code {
  @apply bg-gray-100 rounded-md text-sm font-mono border border-gray-200 text-gray-900;
}

.recipe-body code { @apply px-3 py-1.5; }

.recipe-body pre {
  @apply bg-gray-900 text-gray-100 rounded-xl overflow-x-auto my-8;
}

.recipe-body pre { @apply p-6; }

.recipe-body pre code {
  @apply bg-transparent p-0 border-0;
}

.recipe-body a {
  @apply text-blue-600 hover:text-blue-700 transition-colors duration-200 underline;
  text-decoration-color: #dbeafe;
  text-underline-offset: 3px;
}

.recipe-body a:hover {
  text-decoration-color: #2563eb;
}

.recipe-body strong {
  @apply font-semibold text-gray-900;
}

.recipe-body em {
  @apply italic text-gray-600;
}

.recipe-body h2 {
  @apply text-2xl md:text-3xl font-serif font-bold mb-8 mt-16 first:mt-0 text-gray-900 border-b-[3px] border-blue-600;
  padding-bottom: 0.75rem;
  letter-spacing: -0.02em;
}

.recipe-body h3 {
  @apply font-semibold mt-12 mb-6;
}

.recipe-body h4 {
  @apply text-lg md:text-xl font-medium mb-4 mt-8 text-gray-900;
}

.recipe-body p { 
  @apply mb-6 text-base md:text-lg leading-relaxed text-gray-900;
  font-size: 1.05rem;
}

/* ===== CONTAINER SECTIONS ===== */
.recipe-body .lisatiedot-container,
.recipe-body .vinkit-container {
  @apply relative pl-8 mb-8;
}

.recipe-body .lisatiedot-container h3::before,
.recipe-body .lisatiedot-container h3:hover::before,
.recipe-body .vinkit-container h3::before,
.recipe-body .vinkit-container h3:hover::before { display: none; }

.recipe-body .lisatiedot-container::before,
.recipe-body .vinkit-container::before {
  content: "";
  @apply absolute left-3 top-0 h-full w-px bg-gray-200;
}

.recipe-body .lisatiedot-container ul,
.recipe-body .lisatiedot-container ol,
.recipe-body .vinkit-container ul,
.recipe-body .vinkit-container ol { @apply ml-0 mt-4; }


/* ===== PAGE-LEVEL TABLE OF CONTENTS ===== */
.page-toc-container {
  @apply lg:hidden absolute left-12 right-12 top-24; /* Align with content padding on mobile */
}

@media (min-width: 768px) and (max-width: 1023px) {
  .page-toc-container {
    top: 7rem; /* pt-28 equivalent */
  }
}

@media (min-width: 1024px) {
  .page-toc-container {
    margin-left: 6rem; /* Account for home button */
    top: 6rem; /* pt-24 equivalent */
  }
}

.page-toc summary {
  @apply text-sm font-medium cursor-pointer bg-gray-100 hover:bg-gray-200 max-lg:bg-gray-50 max-lg:border-b max-lg:border-gray-200 transition-colors duration-150 relative text-gray-900;
  user-select: none;
  list-style: none;
  outline: none;
}

.page-toc summary { @apply px-4 py-[0.846rem] max-lg:place-items-center; }

.page-toc summary::-webkit-details-marker {
  display: none;
}

.page-toc summary::marker {
  display: none;
}

.page-toc summary::after {
  content: "â–¼";
  @apply absolute right-4 top-1/2 text-xs text-gray-600 transition-transform duration-150;
  transform: translateY(-50%);
}

.page-toc[open] summary::after {
  transform: translateY(-50%) rotate(180deg);
}

.page-toc summary:focus-visible {
  @apply outline-2 outline-offset-2 outline-blue-600;
}

.page-toc nav {
  @apply bg-white shadow-lg max-w-full max-h-[80vh] overflow-y-auto;
}

.page-toc nav > div {
  @apply p-3;
}

.page-toc ul {
  @apply space-y-0 text-sm list-none p-0 m-0;
}

.page-toc li {
  @apply m-0;
}

.page-toc > nav ul {
  @apply flex flex-wrap gap-x-6 md:gap-y-2 gap-y-3;
}

.page-toc > nav ul > li > a {
  @apply text-gray-900 hover:text-blue-600 rounded transition-colors duration-150 block font-normal;
  text-decoration: none;
  border-bottom: none;
}

.page-toc > nav ul > li > a { @apply py-1.5 px-0; }

.page-toc > nav ul > li > a:hover {
  @apply bg-blue-50;
}

.page-toc > nav ul > li > a:hover { @apply px-2 -mx-2; }

.page-toc > nav ul > li > a:focus-visible {
  @apply outline-2 outline-offset-2 outline-blue-600 bg-blue-50;
}

.page-toc > nav ul > li > a:focus-visible { @apply px-2 -mx-2; }

.page-toc .page-toc-sub {
  @apply ml-0 mt-1 space-y-0;
}

.page-toc .page-toc-sub a {
  @apply text-gray-600 hover:text-blue-600 text-xs rounded transition-colors duration-150 block;
  text-decoration: none;
  border-bottom: none;
}

.page-toc .page-toc-sub a { @apply py-1 px-0; }

.page-toc .page-toc-sub a:hover {
  @apply bg-blue-50;
}

.page-toc .page-toc-sub a:hover { @apply px-2 -mx-2; }

.page-toc .page-toc-sub a:focus-visible {
  @apply outline-2 outline-offset-2 outline-blue-600 bg-blue-50;
}

.page-toc .page-toc-sub a:focus-visible { @apply px-2 -mx-2; }

.page-toc summary svg {
  @apply size-4 text-gray-600;
}

/* ===== ENHANCED RECIPE NOTES & TIPS ===== */
.recipe-note {
  @apply my-4 border-l-4;
}

.recipe-note { @apply p-6 md:-ml-16 -ml-20; }

.recipe-note-info {
  @apply bg-blue-50 border-l-blue-500 text-blue-900 border border-blue-200;
}

.recipe-note-notice {
  @apply bg-blue-50 border-l-blue-500 text-blue-900 border border-blue-200;
}

.recipe-note-tip {
  @apply bg-green-50 border-l-green-500 text-green-900 border border-green-200;
}

.recipe-note-warning {
  @apply bg-orange-50 border-l-orange-500 text-orange-900 border border-orange-200;
}

.recipe-note-critical {
  @apply bg-red-50 border-l-red-500 text-red-900 border border-red-200;
}

.recipe-note-success {
  @apply bg-green-50 border-l-green-500 text-green-900 border border-green-200;
}

.recipe-note-title {
  @apply font-semibold text-base uppercase tracking-wide mb-3 flex items-center gap-4;
}

.recipe-note-info .recipe-note-title::before,
.recipe-note-notice .recipe-note-title::before {
  content: "â„¹ï¸";
  @apply text-lg;
}

.recipe-note-tip .recipe-note-title::before {
  content: "ðŸ’¡";
  @apply text-lg;
}

.recipe-note-warning .recipe-note-title::before {
  content: "âš ï¸";
  @apply text-lg;
}

.recipe-note-critical .recipe-note-title::before {
  content: "ðŸš¨";
  @apply text-lg;
}

.recipe-note-success .recipe-note-title::before {
  content: "âœ…";
  @apply text-lg;
}

.recipe-note-content {
  @apply text-base leading-relaxed;
  font-size: 1.05rem;
}

.recipe-note-content p {
  @apply mb-3 last:mb-0;
}

/* ===== WIKI LINKS SYSTEM ===== */
.wiki-link {
  @apply font-medium transition-colors bg-transparent border-none inline underline decoration-dotted;
  font-size: inherit;
}

.wiki-link { @apply px-0.5; }

a.wiki-link--available {
  @apply cursor-pointer text-inherit;
}

.wiki-link--available:hover { @apply decoration-solid; }

.wiki-link--unavailable,
.ingredient-link[data-exists="false"] {
  @apply text-red-600 opacity-70 cursor-help relative border-b border-dotted no-underline;
  border-bottom-color: currentColor;
}

.wiki-link--unavailable::after,
.ingredient-link[data-exists="false"]::after {
  content: "?";
  @apply inline-block text-xs align-super ml-1 font-bold;
}

.wiki-link--unavailable::before,
.ingredient-link[data-exists="false"]::before {
  content: "Sivua ei lÃ¶ydy";
  @apply absolute bottom-full left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs whitespace-nowrap opacity-0 pointer-events-none transition-opacity z-50 mb-1 rounded;
}

.wiki-link--unavailable::before,
.ingredient-link[data-exists="false"]::before { @apply px-2 py-1; }

.wiki-link--unavailable:hover::before,
.ingredient-link[data-exists="false"]:hover::before { @apply opacity-100; }

/* Legacy support */
.ingredient-link {
  @apply font-medium transition-colors bg-transparent border-none inline underline decoration-dotted cursor-pointer text-blue-600;
  font-size: inherit;
}

.ingredient-link { @apply px-0.5; }

.ingredient-link:hover { @apply decoration-solid; }

.wiki-nonexistent {
  @apply text-red-600 border-b border-dotted opacity-70 cursor-help relative;
  border-bottom-color: currentColor;
}

.wiki-nonexistent::after {
  content: "?";
  @apply inline-block text-xs align-super ml-1 font-bold;
}

.wiki-nonexistent::before {
  content: "Sivua ei lÃ¶ydy";
  @apply absolute bottom-full left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs whitespace-nowrap opacity-0 pointer-events-none transition-opacity z-50 mb-1 rounded;
}

.wiki-nonexistent::before { @apply px-2 py-1; }

.wiki-nonexistent:hover::before { @apply opacity-100; }

.ingredient-link[data-exists="false"] {
  @apply text-red-600 border-b border-dotted opacity-70 cursor-not-allowed no-underline;
  border-bottom-color: currentColor;
}

/* ===== INGREDIENT AMOUNTS ===== */
.ingredient-amount { @apply font-medium text-gray-900 mr-6 min-w-16 inline-block; }
.ingredient-name { @apply flex-grow; }

/* ===== ENHANCED SIDEBAR STYLING ===== */
.recipe-sidebar {
  @apply space-y-4 bg-white rounded-lg;
}

.recipe-sidebar { @apply p-4; }

.sidebar-card {
  @apply pb-1;
}

.sidebar-card-header {
  @apply font-medium text-sm uppercase tracking-wide text-gray-600 mb-3;
}

.sidebar-card-content {
  @apply text-sm space-y-2;
}

.sidebar-progress {
  @apply text-gray-600 text-xs;
}

.sidebar-navigation ul {
  @apply space-y-1 list-none pl-0;
}

.sidebar-navigation a {
  @apply text-gray-900 border-none hover:text-blue-600 no-underline block rounded transition-colors text-sm;
}

.sidebar-navigation a { @apply py-1 px-2 -mx-2; }

.sidebar-navigation a:hover {
  @apply bg-blue-100;
}

/* ===== ENHANCED TIMER INTEGRATION ===== */
.timer-inline {
  @apply inline-flex items-center gap-1 bg-orange-100 text-orange-800 rounded text-sm font-medium cursor-pointer transition-colors;
}

.timer-inline { @apply px-2 py-1; }

.timer-inline:hover {
  @apply bg-orange-200;
}

.timer-inline-icon {
  @apply size-3;
}

/* ===== ENHANCED SOCIAL SHARING ===== */
.recipe-sharing {
  @apply my-16;
}

.recipe-sharing h3 {
  @apply font-light text-2xl lg:text-3xl xl:text-4xl mb-6 text-center text-gray-900 tracking-tight leading-tight;
}

.social-share-buttons {
  @apply flex flex-wrap justify-center gap-3;
}

.social-share-btn {
  @apply inline-flex items-center gap-2 rounded-lg text-sm font-medium transition duration-200 transform hover:scale-105;
}

.social-share-btn { @apply px-4 py-2; }

/* ===== ENHANCED NAVIGATION ===== */
.recipe-navigation {
  @apply mt-12 pt-8 h-28 border-t border-gray-200 flex flex-col sm:flex-row justify-between gap-4 md:gap-8;
}

/* ===== GLOBAL ANIMATIONS ===== */
@keyframes button-fade-in {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

/* ===== RESPONSIVE OPTIMIZATIONS ===== */
@media (max-width: 767px) {
  .recipe-content { @apply mx-auto; }
  
  .recipe-content { @apply px-4 my-4; }
  
  .recipe-body img,
  .recipe-body figure { @apply max-w-full ml-0 mr-0; }
  .recipe-body blockquote { @apply pl-4 max-w-full text-sm ml-0 mr-0; }
  .ingredient-amount { @apply mr-4 min-w-12; }
  .timer-link { @apply text-sm; }
  
  .timer-link { @apply px-1; }
  
  .wiki-link--unavailable::after,
  .wiki-nonexistent::after { @apply text-xs ml-1; }
  .wiki-link--unavailable::before,
  .wiki-nonexistent::before { @apply text-xs; }
  
  .wiki-link--unavailable::before,
  .wiki-nonexistent::before { @apply px-2 py-1; }
  
  .popup-profile-grid { @apply gap-6; }
  .popup-variants-container,
  .popup-alternatives-container { @apply grid-cols-1; }
  .popup-property-item { @apply flex-col items-start gap-1; }
  .popup-property-item dd { @apply text-left; }
  .variant-list { @apply ml-2 pl-2; }
  .variant-content { @apply flex-col items-start gap-2; }
  .variant-arrow { @apply self-end; }
  
  .filter-section { @apply p-4; }
  .filter-section h3 { @apply text-base mb-3; }
  
  .page-toc nav > div {
    @apply p-3;
  }
  
  .page-toc > nav ul > li > a {
    @apply text-xs;
  }
  
  .page-toc > nav ul > li > a { @apply py-1 px-1; }
  
  .page-toc .page-toc-sub a {
    @apply text-xs;
  }
  
  .page-toc .page-toc-sub a { @apply py-0.5 px-1; }
  
  .sidebar-card {
    @apply p-3;
  }
}

/* ===== REDUCED MOTION ACCESSIBILITY ===== */
@media (prefers-reduced-motion: reduce) {
  .btn:hover, 
  .modernist-card:hover,
  .filter-card:hover,
  .reference-card:hover,
  .hover-translate:hover,
  .social-share-btn:hover {
    transform: none;
  }
}

/* =============================================================================
   FILTER POPUP SYSTEM - SIMPLIFIED
   ============================================================================= */

/* ===== FILTER BUTTON STATES ===== */
.filter-button[aria-expanded="true"] {
  @apply text-white bg-gray-900;
}

/* Remove bottom radius when filter popups are open */
.filter-bar:has([aria-expanded="true"]) {
  @apply rounded-b-none;
}

/* =============================================================================
   MASONRY LAYOUT FOR RECIPE CONTENT
   ============================================================================= */

/* ===== RECIPE CONTENT MASONRY LAYOUT ===== */
#recipe-content,
#content-groups {
  /* Enable masonry layout on large screens */
  @media (min-width: 1024px) {
    column-count: 2;
    column-gap: 2rem;
    column-fill: balance;
  }
}

.category-section {
  /* Prevent category sections from breaking across columns */
  break-inside: avoid;
  page-break-inside: avoid;
  
  /* Add some spacing between sections in masonry layout */
  @media (min-width: 1024px) {
    margin-bottom: 1.5rem;
    width: 100%;
  }
  
  /* Reset margin for smaller screens */
  @media (max-width: 1023px) {
    display: block;
  }
}

/* Ensure recipe containers within sections don't break */
.recipe-container {
  break-inside: avoid;
  page-break-inside: avoid;
}

/* Optional: Force specific sections to start new columns if needed */
.category-section[data-category="leivonta"] {
  @media (min-width: 1024px) {
    /* Uncomment if you want Leivonta to always start a new column */
    /* break-before: column; */
  }
}

/* ===== PRINT STYLES ===== */
@media print {
  .sidebar, 
  .navbar,
  .footer,
  button,
  .recipe-progress-tracker,
  .servings-control,
  .timer-link,
  .serving-calculator,
  .filter-popup,
  .popup-main {
    display: none !important;
  }
  
  body {
    @apply text-xs;
    margin: 1cm;
    background: white;
    color: black;
  }
  
  .recipe-content { @apply max-w-full m-0 p-0; }
  img { max-width: 8cm; max-height: 8cm; }
  
  .page-toc {
    @apply border border-gray-300 rounded-none;
    break-inside: avoid;
  }
  
  .page-toc summary {
    @apply text-black;
  }
  
  .page-toc summary { @apply px-3 py-2; }
  
  .page-toc a {
    @apply text-black;
    text-decoration: none !important;
  }
  
  .recipe-header {
    @apply mb-6;
  }
  
  .recipe-title {
    @apply text-2xl mb-3;
  }
  
  .recipe-essentials {
    @apply text-xs mb-4;
  }
  
  .recipe-note {
    @apply my-3;
  }
  
  .recipe-note { @apply p-2; }
  
  .sidebar-card,
  .recipe-sharing,
  .timer-inline {
    @apply hidden;
  }
}

/* =============================================================================
   DARK MODE OVERRIDES - HIGH SPECIFICITY
   ============================================================================= */

/* Root element overrides - html element with data-theme="dark" */
html[data-theme="dark"] {
  background-color: rgb(3 7 18) !important; /* Override bg-gray-50 */
  color: rgb(249 250 251) !important; /* Override text-gray-900 */
  
  /* Dark mode CSS custom properties */
  --color-accent: rgb(96 165 250);
  --color-accent-light: rgb(30 58 138);
  --color-background: rgb(17 24 39);
  --color-surface: rgb(30 41 59);
  --color-border: rgb(55 65 81);
}

/* Body element override */
html[data-theme="dark"] body {
  background-color: rgb(3 7 18) !important;
  color: rgb(249 250 251) !important;
}



/* These rules use high specificity to override Tailwind's default utilities */

/* Gray Backgrounds */
html[data-theme="dark"] .bg-gray-50 { background-color: rgb(3 7 18) !important; }
html[data-theme="dark"] .bg-gray-100 { background-color: rgb(17 24 39) !important; }
html[data-theme="dark"] .bg-white { background-color: rgb(17 24 39) !important; }

/* Gray Text */
html[data-theme="dark"] .text-gray-900 { color: rgb(249 250 251) !important; }
html[data-theme="dark"] .text-gray-800 { color: rgb(229 231 235) !important; }
html[data-theme="dark"] .text-gray-700 { color: rgb(209 213 219) !important; }
html[data-theme="dark"] .text-gray-600 { color: rgb(156 163 175) !important; }
html[data-theme="dark"] .text-gray-500 { color: rgb(156 163 175) !important; }

/* Gray Borders */
html[data-theme="dark"] .border-gray-200 { border-color: rgb(55 65 81) !important; }
html[data-theme="dark"] .border-gray-300 { border-color: rgb(75 85 99) !important; }

/* Gray Hover States */
html[data-theme="dark"] .hover\:bg-gray-50:hover { background-color: rgb(17 24 39) !important; }
html[data-theme="dark"] .hover\:bg-gray-100:hover { background-color: rgb(55 65 81) !important; }
html[data-theme="dark"] .hover\:border-gray-300:hover { border-color: rgb(75 85 99) !important; }
html[data-theme="dark"] .hover\:text-gray-400:hover { color: rgb(107 114 128) !important; }
html[data-theme="dark"] .hover\:text-gray-600:hover { color: rgb(209 213 219) !important; }
html[data-theme="dark"] .hover\:text-gray-700:hover { color: rgb(229 231 235) !important; }

/* Blue Colors */
html[data-theme="dark"] .text-blue-600 { color: rgb(96 165 250) !important; }
html[data-theme="dark"] .text-blue-700 { color: rgb(147 197 253) !important; }
html[data-theme="dark"] .text-blue-800 { color: rgb(191 219 254) !important; }
html[data-theme="dark"] .bg-blue-50 { background-color: rgb(23 37 84) !important; }
html[data-theme="dark"] .bg-blue-100 { background-color: rgb(30 58 138) !important; }
html[data-theme="dark"] .bg-blue-200 { background-color: rgb(30 64 175) !important; }
html[data-theme="dark"] .border-blue-600 { border-color: rgb(59 130 246) !important; }
html[data-theme="dark"] .border-blue-100 { border-color: rgb(30 64 175) !important; }
html[data-theme="dark"] .hover\:bg-blue-100:hover { background-color: rgb(30 58 138) !important; }

/* Green Colors */
html[data-theme="dark"] .text-green-600 { color: rgb(74 222 128) !important; }
html[data-theme="dark"] .text-green-700 { color: rgb(34 197 94) !important; }
html[data-theme="dark"] .text-green-800 { color: rgb(134 239 172) !important; }
html[data-theme="dark"] .bg-green-50 { background-color: rgb(20 83 45) !important; }
html[data-theme="dark"] .bg-green-100 { background-color: rgb(20 83 45) !important; }
html[data-theme="dark"] .border-green-600 { border-color: rgb(34 197 94) !important; }

/* Orange Colors */
html[data-theme="dark"] .bg-orange-100 { background-color: rgb(154 52 18) !important; }
html[data-theme="dark"] .text-orange-600 { color: rgb(251 146 60) !important; }

/* Purple Colors */
html[data-theme="dark"] .bg-purple-100 { background-color: rgb(88 28 135) !important; }
html[data-theme="dark"] .text-purple-600 { color: rgb(196 181 253) !important; }

/* Additional dark mode overrides for better contrast */
html[data-theme="dark"] .recipe-note-info { 
  background-color: rgb(23 37 84) !important; 
  border-color: rgb(59 130 246) !important; 
  color: rgb(191 219 254) !important; 
}

html[data-theme="dark"] .recipe-note-tip { 
  background-color: rgb(20 83 45) !important; 
  border-color: rgb(34 197 94) !important; 
  color: rgb(134 239 172) !important; 
}

html[data-theme="dark"] .recipe-note-notice { 
  background-color: rgb(23 37 84) !important; 
  border-color: rgb(59 130 246) !important; 
  color: rgb(191 219 254) !important; 
}

html[data-theme="dark"] .recipe-note-notice p {
  color: rgb(30 58 138) !important; /* Darker blue for better readability */
}

html[data-theme="dark"] .recipe-note-warning { 
  background-color: rgb(154 52 18) !important; 
  border-color: rgb(234 88 12) !important; 
  color: rgb(253 186 116) !important; 
}

html[data-theme="dark"] .recipe-note-critical { 
  background-color: rgb(127 29 29) !important; 
  border-color: rgb(220 38 38) !important; 
  color: rgb(252 165 165) !important; 
}

/* ===== COMPREHENSIVE COMPONENT OVERRIDES ===== */

/* Card system dark mode */
html[data-theme="dark"] .filter-card,
html[data-theme="dark"] .reference-card,
html[data-theme="dark"] .modernist-card {
  background-color: rgb(17 24 39) !important;
  border-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .filter-card:hover,
html[data-theme="dark"] .reference-card:hover,
html[data-theme="dark"] .modernist-card:hover {
  border-color: rgb(75 85 99) !important;
}

/* Button system dark mode */
html[data-theme="dark"] .btn-primary,
html[data-theme="dark"] .btn-secondary {
  background-color: rgb(17 24 39) !important;
  border-color: rgb(55 65 81) !important;
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .btn-primary:hover,
html[data-theme="dark"] .btn-secondary:hover {
  background-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .btn-secondary-large {
  background-color: rgb(17 24 39) !important;
  border-color: rgb(55 65 81) !important;
  color: rgb(249 250 251) !important;
}

/* Filter system dark mode */
html[data-theme="dark"] .filter-popup,
html[data-theme="dark"] .shared-filter-popup {
  background-color: rgb(17 24 39) !important;
  border-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .filter-section {
  background-color: rgb(17 24 39) !important;
}

html[data-theme="dark"] .filter-section h3 {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .filter-item {
  color: rgb(209 213 219) !important;
  background-color: transparent !important;
}

html[data-theme="dark"] .filter-item:hover,
html[data-theme="dark"] .filter-item:focus {
  background-color: rgb(55 65 81) !important;
  border-color: rgb(75 85 99) !important;
}

html[data-theme="dark"] .filter-item-active {
  background-color: rgb(55 65 81) !important;
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .filter-toggle-btn {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] .filter-toggle-btn:hover {
  background-color: rgb(229 231 235) !important;
  color: rgb(17 24 39) !important;
}

/* Search input dark mode */
html[data-theme="dark"] .search-input-container {
  background-color: rgba(17, 24, 39, 0.95) !important;
  border-color: rgba(55, 65, 81, 0.8) !important;
}

html[data-theme="dark"] input[type="search"],
html[data-theme="dark"] input[type="text"],
html[data-theme="dark"] input[type="number"] {
  background-color: rgb(17 24 39) !important;
  border-color: rgb(55 65 81) !important;
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] input[type="search"]:focus,
html[data-theme="dark"] input[type="text"]:focus,
html[data-theme="dark"] input[type="number"]:focus {
  border-color: rgb(96 165 250) !important;
  background-color: rgb(30 41 59) !important;
}

html[data-theme="dark"] input::placeholder {
  color: rgb(107 114 128) !important;
}

/* Sidebar components dark mode */
html[data-theme="dark"] .recipe-sidebar {
  background-color: rgb(17 24 39) !important;
}

html[data-theme="dark"] .sidebar-card {
  background-color: rgb(17 24 39) !important;
}

html[data-theme="dark"] .sidebar-card-header {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] .sidebar-card-content {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .sidebar-navigation a {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .sidebar-navigation a:hover {
  color: rgb(96 165 250) !important;
  background-color: rgb(30 58 138) !important;
}

/* Popup system dark mode */
html[data-theme="dark"] .popup-card {
  background-color: rgb(17 24 39) !important;
  border-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .popup-card h2 {
  background-color: rgb(30 41 59) !important;
  border-color: rgb(55 65 81) !important;
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .popup-card h3,
html[data-theme="dark"] .popup-card h4 {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .popup-card p {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .popup-card li {
  color: rgb(209 213 219) !important;
}

/* Reference components dark mode */
html[data-theme="dark"] .reference-item {
  border-color: transparent !important;
}

html[data-theme="dark"] .reference-item:hover {
  border-color: rgb(75 85 99) !important;
  background-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .reference-item-title {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .reference-item:hover .reference-item-title {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .reference-item-description {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] .reference-item:hover .reference-item-description {
  color: rgb(209 213 219) !important;
}

/* Universal list item components dark mode */
html[data-theme="dark"] .list-item {
  border-color: transparent !important;
}

html[data-theme="dark"] .list-item:hover {
  border-color: rgb(75 85 99) !important;
  background-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .list-item-title {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .list-item:hover .list-item-title {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .list-item-description {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] .list-item:hover .list-item-description {
  color: rgb(209 213 219) !important;
}

/* Recipe item components dark mode (aliases for backward compatibility) */
html[data-theme="dark"] .recipe-item {
  border-color: transparent !important;
}

html[data-theme="dark"] .recipe-item:hover {
  border-color: rgb(75 85 99) !important;
  background-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .recipe-item-title {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .recipe-item:hover .recipe-item-title {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .recipe-item-description {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] .recipe-item:hover .recipe-item-description {
  color: rgb(209 213 219) !important;
}

/* Typography dark mode overrides */
html[data-theme="dark"] p {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .lead {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] .caption {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] h1,
html[data-theme="dark"] h2,
html[data-theme="dark"] h3,
html[data-theme="dark"] h4,
html[data-theme="dark"] h5,
html[data-theme="dark"] h6 {
  color: rgb(249 250 251) !important;
}

/* Recipe body dark mode */
html[data-theme="dark"] .recipe-body {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .recipe-body h2 {
  color: rgb(249 250 251) !important;
  border-color: rgb(96 165 250) !important;
}

html[data-theme="dark"] .recipe-body h3,
html[data-theme="dark"] .recipe-body h4 {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .recipe-body p {
  color: rgb(209 213 219) !important;
}

html[data-theme="dark"] .recipe-body strong {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .recipe-body em {
  color: rgb(156 163 175) !important;
}

html[data-theme="dark"] .recipe-body code {
  background-color: rgb(55 65 81) !important;
  border-color: rgb(75 85 99) !important;
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] figcaption {
  color: rgb(156 163 175) !important;
  background-color: rgb(55 65 81) !important;
}

/* ===== DARK THEME: LARGE SIDEBAR BUTTONS ===== */
html[data-theme="dark"] .sidebar-large-btn {
  background-color: rgb(17 24 39) !important;
  border-color: rgb(55 65 81) !important;
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .sidebar-large-btn:hover {
  border-color: rgb(75 85 99) !important;
  background-color: rgb(31 41 55) !important;
}

html[data-theme="dark"] .sidebar-large-btn .bg-gray-100 {
  background-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .sidebar-large-btn h3 {
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] .sidebar-large-btn p {
  color: rgb(156 163 175) !important;
}

/* ===== DARK THEME: PILL TOGGLE SWITCHES ===== */
html[data-theme="dark"] .info-toggle-switch-bg {
  background-color: rgb(55 65 81) !important;
}

html[data-theme="dark"] .info-toggle-switch input:checked + .info-toggle-switch-bg {
  background-color: rgb(96 165 250) !important;
}

html[data-theme="dark"] .info-toggle-switch-bg::after {
  background-color: rgb(249 250 251) !important;
}

/* ===== DARK THEME: SIDEBAR BORDERS AND BACKGROUNDS ===== */
html[data-theme="dark"] #sidebar-header {
  border-color: rgb(55 65 81) !important;
  background-color: rgb(17 24 39) !important;
}

html[data-theme="dark"] #sidebar {
  border-color: rgb(55 65 81) !important;
  background-color: transparent !important;
}

html[data-theme="dark"] #sidebar-main-content {
  background-color: rgb(17 24 39) !important;
}

/* ===== DARK THEME: NAVIGATION BUTTONS ===== */
html[data-theme="dark"] a[href="/"],
html[data-theme="dark"] #sidebar-toggle {
  background-color: rgb(55 65 81) !important;
  color: rgb(249 250 251) !important;
}

html[data-theme="dark"] a[href="/"]:hover,
html[data-theme="dark"] #sidebar-toggle:hover {
  background-color: rgb(75 85 99) !important;
}