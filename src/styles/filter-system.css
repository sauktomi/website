/**
 * Filter System Styles
 * 
 * This file contains CSS styles for the unified filtering system used across
 * the website. It provides styling for filter components, search interfaces,
 * and interactive filtering controls for recipes and directory items.
 * 
 * Key Features:
 * - Filter component styling and layout
 * - Search input and results styling
 * - Category and tag filter buttons
 * - Responsive filter grid layouts
 * - Interactive filter states and animations
 * - Accessibility-focused filter controls
 * 
 * Filter Components:
 * - Search input fields and suggestions
 * - Category selection buttons
 * - Tag-based filtering
 * - Sort and order controls
 * - Filter result displays
 * - Mobile filter interfaces
 * 
 * Usage:
 * - Applied to SimpleFilterSystem component
 * - Used across recipe and directory pages
 * - Provides consistent filtering experience
 * - Supports both desktop and mobile layouts
 * 
 * Dependencies:
 * - Tailwind CSS v4
 * - Custom theme variables
 * - Container query support
 * 
 * @author Tomi
 * @version 1.0.0
 */

/* Filter System Styles - Tailwind Optimized */

/* =============================================================================
   FILTER SYSTEM COMPONENTS WITH @APPLY DIRECTIVES
   ============================================================================= */

/* Search Input */
.filter-search-container {
  @apply relative;
}

.filter-search-icon {
  @apply absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none;
}

.filter-search-icon svg {
  @apply w-5 h-5 text-secondary-accent;
}

.filter-search-input {
  @apply w-full pl-12 pr-4 py-3 text-base bg-primary-light border border-secondary rounded-lg outline-none transition-all duration-200;
}

.filter-search-input:focus {
  @apply ring-2 ring-primary-accent border-transparent;
}

.filter-search-input::placeholder {
  @apply text-secondary-accent;
}

/* Filter Controls Container */
.filter-controls {
  @apply flex flex-wrap gap-3 justify-around;
}

/* Filter Buttons */
.filter-button {
  @apply inline-flex flex-1 justify-center rounded-xl items-center gap-2 px-4 py-2 text-sm h-11 transition-all duration-200 border border-secondary bg-primary-light;
}

.filter-button:focus,
.filter-button[aria-expanded="true"] {
  @apply outline-none ring-1 ring-offset-1 ring-secondary rounded-b-none;
}

.filter-button svg {
  @apply w-4 h-4 text-secondary-accent;
}

.filter-button-text {
  @apply hidden sm:inline;
}

.filter-button-badge {
  @apply inline-flex items-center justify-center w-5 h-5 text-xs font-semibold text-primary-light bg-primary-dark rounded-full;
}

/* Clear All Filters Button */
.clear-all-button {
  @apply inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-secondary-accent h-11 transition-all duration-200;
}

.clear-all-button:hover {
  @apply text-primary-dark;
}

.clear-all-button:focus {
  @apply outline-none ring-2 ring-primary-accent rounded-lg;
}

.clear-all-button svg {
  @apply w-4 h-4;
}

.clear-all-button-text {
  @apply hidden sm:inline;
}

/* Filter Popovers */
.filter-popover {
  @apply bg-primary-light border border-secondary rounded-xl rounded-t-none max-h-[80vh] overflow-hidden backdrop-blur-sm z-50 ring-1 ring-offset-1 ring-secondary;
}

/* Popover Content */
.filter-popover-content {
  @apply p-4 flex flex-col gap-4;
}

/* Filter Options Grid */
.filter-options {
  @apply flex flex-col gap-2 max-h-60 overflow-y-auto;
}

/* Filter Option Buttons */
.filter-option-button {
  @apply w-full text-left p-2 text-sm rounded-lg transition-all duration-200;
}

.filter-option-button:focus {
  @apply outline-none ring-1 ring-offset-0;
}

.filter-option-button.active {
  @apply bg-primary-dark outline-none ring-0 text-primary-light;
}

.filter-option-text {
  @apply block overflow-hidden text-ellipsis whitespace-nowrap;
}

/* Clear Section Filters */
.filter-clear-section {
  @apply pt-2 border-t border-secondary;
}

.filter-clear-section-button {
  @apply w-full inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-secondary-accent rounded-lg transition-all duration-200;
}

.filter-clear-section-button:hover {
  @apply text-primary-dark;
}

.filter-clear-section-button:focus {
  @apply outline-none ring-2 ring-primary-accent;
}

.filter-clear-section-button svg {
  @apply w-4 h-4;
}

/* Main Container */
.filter-system-container {
  @apply mb-8 flex flex-col gap-6;
}

/* =============================================================================
   LEGACY FILTER COMPONENTS
   ============================================================================= */

/* Filter Section */
.filter-section {
  @apply p-6;
}

.filter-section h3 {
  @apply text-lg font-medium text-primary-dark mb-4 flex items-center gap-2;
}

/* Filter Toggle Buttons */
.filter-toggle-btn {
  @apply flex items-center justify-center gap-2 w-full text-secondary-accent hover:bg-primary-dark hover:text-primary-light;
}

.filter-toggle-btn {
  @apply px-4 py-3;
}

/* Filter button wrapper positioning */
.filter-button-wrapper.first-filter .filter-toggle-btn {
  @apply border-r border-secondary-light/50;
}

.filter-button-wrapper.middle-filter .filter-toggle-btn {
  @apply border-r border-secondary-light/50;
}

.filter-button-wrapper.last-filter .filter-toggle-btn {
  /* No border for last filter button */
}

.filter-toggle-btn--wide {
  @apply flex items-center justify-center text-secondary-accent hover:bg-primary-dark hover:text-primary-light hover:rounded-r-xl;
}

.filter-toggle-btn--wide {
  @apply px-6 py-3;
}

.filter-toggle-btn--full-height {
  @apply flex h-full items-center justify-center text-secondary-accent hover:bg-primary-dark hover:text-primary-light hover:rounded-r-xl;
}

.filter-toggle-btn--full-height {
  @apply px-6 py-3;
}

/* Filter Badges */
.filter-badge {
  @apply hidden absolute -top-2 -right-2 size-5 bg-primary-dark text-primary-light text-xs rounded-full items-center justify-center z-10;
}

/* Filter Reset Buttons */
.filter-reset-btn {
  @apply w-full hidden items-center justify-center gap-2 text-secondary-accent hover:text-primary-dark bg-secondary-light border-t border-secondary-light text-sm;
}

.filter-reset-btn {
  @apply px-4 py-3;
}

.filter-reset-btn--main {
  @apply w-full hidden items-center justify-center gap-2 bg-secondary-light text-primary-dark rounded-lg hover:bg-secondary text-sm;
}

.filter-reset-btn--main {
  @apply px-4 py-3;
}

/* Filter Content */
.filter-content {
  @apply p-3;
}

/* Filter Items */
.filter-item {
  @apply text-sm min-h-16 w-full text-left;
}

.filter-item {
  @apply px-8 py-6;
}

.filter-item:hover {
  @apply bg-secondary-light border-secondary-light;
}

.filter-item:focus {
  @apply bg-secondary-light border-secondary-light outline-none;
}

.filter-item-active {
  @apply bg-secondary-light text-primary-dark;
}

/* Legacy Filter Classes (for reference pages) */
.category-filter {
  @apply w-full text-left text-sm rounded-lg border border-transparent hover:border-secondary focus:border-secondary-accent transition-all duration-200 focus:outline-none;
}

.category-filter {
  @apply px-3 py-2;
}

.dietary-filter {
  @apply w-full text-left text-sm rounded-lg border border-transparent hover:border-secondary focus:border-secondary-accent transition-all duration-200 focus:outline-none;
}

.dietary-filter {
  @apply px-3 py-2;
}

.type-filter {
  @apply w-full text-left text-sm rounded-lg border border-transparent hover:border-secondary focus:border-secondary-accent transition-all duration-200 focus:outline-none;
}

.type-filter {
  @apply px-3 py-2;
}

/* Active states for legacy filters */
.category-filter.filter-item-active,
.dietary-filter.filter-item-active,
.type-filter.filter-item-active {
  @apply bg-secondary-light text-primary-dark border-secondary;
}

/* Filter Card Components */
.filter-card {
  @apply p-6 text-center cursor-pointer bg-primary-light border border-secondary overflow-hidden rounded-xl transition-all duration-300;
}

.filter-card:hover {
  @apply border-secondary-accent -translate-y-0.5;
}

.filter-card:focus-within {
  @apply outline-2 outline-primary-dark outline-offset-2;
}

/* Navigation Container */
.nav-container {
  @apply relative;
}

/* Search Input Container */
.search-input-container {
  @apply bg-primary-light/95 backdrop-blur-md border border-secondary-light/80 rounded-xl shadow-sm mb-4;
}

/* Visibility Utility Classes */
.vis-flex {
  @apply flex;
}

.vis-block {
  @apply block;
}

.vis-inline-flex {
  @apply inline-flex;
}

/* Remove bottom radius when filter popups are open */
.filter-bar:has([aria-expanded="true"]) {
  @apply rounded-b-none;
}

/* =============================================================================
   ESSENTIAL CSS THAT CANNOT BE CONVERTED TO TAILWIND
   ============================================================================= */

/* CSS Anchor Positioning for Filter Popovers */
.filter-button-anchor {
  anchor-name: var(--anchor-name);
}

.filter-popover-positioned:popover-open {
  position-area: bottom;
  width: anchor-size(100%);
}

/* Popover Backdrop Styles */
.popover-backdrop::backdrop {
  background: rgba(0, 0, 0, 0.5);
}

/* Smooth transitions for popovers */
.popover-smooth-transition {
  transition: opacity 0.2s ease-out;
  opacity: 0;
}

.popover-smooth-transition:popover-open {
  opacity: 1;
  transform: scale(1) translateY(0);
}

/* Filter popup positioning and backdrop */
.filter-popup {
  max-width: 90vw;
  max-height: 80vh;
  overflow-y: auto;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.filter-popup:popover-open {
  display: block;
  opacity: 1;
  visibility: visible;
}

.filter-popup::backdrop {
  background-color: rgba(0, 0, 0, 0.3);
  pointer-events: none;
}

/* Container-aware responsive design */
@container component (min-width: 768px) {
  .filter-popup {
    max-width: 82vw;
  }
}

/* Large screen optimizations for filter popups */
@media (min-width: 1024px) {
  .filter-popup {
    max-height: 75vh;
  }
}

@media (min-width: 1280px) {
  .filter-popup {
    max-height: 70vh;
  }
}

@media (min-width: 1536px) {
  .filter-popup {
    max-height: 65vh;
  }
}

/* Special handling for filter sections in main popup */
.filter-section .space-y-2 .filter-item {
  margin: 0;
}

/* Print styles */
@media print {
  .filter-popup {
    display: none !important;
  }
} 